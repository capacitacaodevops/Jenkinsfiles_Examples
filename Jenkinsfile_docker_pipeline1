pipeline {
    agent any
    
    stages {
    
                   
        stage('Pull Container Mario') {
            steps {
                sh '''
                   id
                   pwd
                   docker-compose -f docker-compose-mario.yml pull
                   '''
            }
         }
         
         stage('Iniciar Container Mario') {
            steps {
                sh '''
                   ./up_mario.sh
                   docker-compose -f docker-compose-mario.yml up
                    '''
            }
         }
         
         stage('Download Aplicação Enquete Devops') {
           steps {     
        git url: 'https://github.com/capacitacaodevops/Enquete_Devops.git'
            }
        }
         
         stage('Descompactar Aplicação Enquete') {
            steps {
                sh 'tar -xvzf Enquete.tar.gz'
            }
        }
         
          stage('Iniciar Aplicação Enquete') {
            steps {
                sh '''
                    cd Enquete/compose
                    sudo nohup docker-compose up &
                   '''
            }
         }
         
        
        
    }
}


